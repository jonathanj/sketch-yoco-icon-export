var globalThis=this,global=this;function __skpm_run(e,t){globalThis.context=t;try{var n=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t){e.exports=require("sketch")},function(e,t,n){var r=n(8),o=n(9),i=n(10),a=n(12);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){(function(t){e.exports.getURL=function(e){return NSURL.URLWithString(String(NSString.stringWithString(e).stringByExpandingTildeInPath()).replace(/ /g,"%20"))},e.exports.runDialog=function(e,n,r){if(!r){var o=e.runModal();return t.resolve(n(e,o))}var i=coscript.createFiber(),a=(r.sketchObject||r).documentWindow();return new t((function(t,r){e.beginSheetModalForWindow_completionHandler(a,__mocha__.createBlock_function("v16@?0q8",(function(o){try{t(n(e,o))}catch(a){r(a)}NSApp.endSheet(e),i?i.cleanup():coscript.shouldKeepAround=!1})))}))},e.exports.runDialogSync=function(e,t,n){var r;if(!n)return r=e.runModal(),t(e,r);var o=(n.sketchObject||n).documentWindow();return e.beginSheetModalForWindow_completionHandler(o,__mocha__.createBlock_function("v16@?0q8",(function(e){NSApp.stopModalWithCode(e)}))),r=NSApp.runModalForWindow(o),NSApp.endSheet(e),t(e,r)}}).call(this,n(7))},function(e,t,n){var r=n(2);function o(e,t){e&&("function"==typeof e.isKindOfClass||e.sketchObject)||(t=e,e=void 0),t||(t={});var n=NSOpenPanel.openPanel();if(t.title&&(n.title=t.title),t.defaultPath&&n.setDirectoryURL(r.getURL(t.defaultPath)),t.buttonLabel&&(n.prompt=t.buttonLabel),t.filters&&t.filters.length){var o=[];t.filters.forEach((function(e){e.extensions.forEach((function(e){o.push(e)}))})),n.allowedFileTypes=o}var i=Array.isArray(t.properties)&&t.properties.length>0;return n.canChooseFiles=i&&-1!==t.properties.indexOf("openFile"),n.canChooseDirectories=i&&-1!==t.properties.indexOf("openDirectory"),n.allowsMultipleSelection=i&&-1!==t.properties.indexOf("multiSelections"),n.showsHiddenFiles=i&&-1!==t.properties.indexOf("showHiddenFiles"),n.canCreateDirectories=i&&-1!==t.properties.indexOf("createDirectory"),n.resolvesAliases=!i||-1===t.properties.indexOf("noResolveAliases"),n.treatsFilePackagesAsDirectories=i&&-1!==t.properties.indexOf("treatPackageAsDirectory"),t.message&&(n.message=t.message),{document:e,options:t,dialog:n}}e.exports.openDialog=function(e,t){var n=o(e,t);return r.runDialog(n.dialog,(function(e,t){if(t!=NSOKButton)return{canceled:!0,filePaths:[]};for(var n=[],r=e.URLs(),o=0;o<r.length;o+=1)n.push(String(r[o].path()));return{canceled:!1,filePaths:n}}),n.document)},e.exports.openDialogSync=function(e,t){var n=o(e,t);return r.runDialogSync(n.dialog,(function(e,t){if(t!=NSOKButton)return[];for(var n=[],r=e.URLs(),o=0;o<r.length;o+=1)n.push(String(r[o].path()));return n}),n.document)}},function(e,t,n){var r=n(2);function o(e,t){e&&("function"==typeof e.isKindOfClass||e.sketchObject)||(t=e,e=void 0),t||(t={});var n=NSSavePanel.savePanel();if(t.title&&(n.title=t.title),t.defaultPath)if(n.setDirectoryURL(r.getURL(t.defaultPath)),"."===t.defaultPath[0]||"~"===t.defaultPath[0]||"/"===t.defaultPath[0]){var o=t.defaultPath.split("/");o.length>1&&o[o.length-1]&&n.setNameFieldStringValue(o[o.length-1])}else n.setNameFieldStringValue(t.defaultPath);if(t.buttonLabel&&(n.prompt=t.buttonLabel),t.filters&&t.filters.length){var i=[];t.filters.forEach((function(e){e.extensions.forEach((function(e){i.push(e)}))})),n.allowedContentTypes?n.allowedContentTypes=i.map(e=>UTType.typeWithFilenameExtension(e)):n.allowedFileTypes=i}return t.message&&(n.message=t.message),t.nameFieldLabel&&(n.nameFieldLabel=t.nameFieldLabel),t.showsTagField&&(n.showsTagField=t.showsTagField),{document:e,options:t,dialog:n}}e.exports.saveDialog=function(e,t){var n=o(e,t);return r.runDialog(n.dialog,(function(e,t){return{canceled:t!=NSOKButton,filePath:t==NSOKButton?String(e.URL().path()):void 0}}),n.document)},e.exports.saveDialogSync=function(e,t){var n=o(e,t);return r.runDialogSync(n.dialog,(function(e,t){return t==NSOKButton?String(e.URL().path()):void 0}),n.document)}},function(e,t,n){var r=n(2),o={none:0,info:1,error:2,question:1,warning:2};function i(e,t){!e||"function"!=typeof e.isKindOfClass&&!e.sketchObject?(t=e,e=void 0):e.sketchObject&&(e=e.sketchObject),t||(t={});var n=NSAlert.alloc().init();if(t.type&&(n.alertStyle=o[t.type]||0),t.buttons&&t.buttons.length&&t.buttons.forEach((function(e){n.addButtonWithTitle(t.normalizeAccessKeys?e.replace(/&/g,""):e)})),void 0!==t.defaultId){var r=n.buttons();t.defaultId<r.length&&(r[0].setKeyEquivalent(""),r[t.defaultId].setKeyEquivalent("\r"))}if(t.title,t.message&&(n.messageText=t.message),t.detail&&(n.informativeText=t.detail),t.checkboxLabel&&(n.showsSuppressionButton=!0,n.suppressionButton().title=t.checkboxLabel,void 0!==t.checkboxChecked&&(n.suppressionButton().state=t.checkboxChecked?NSOnState:NSOffState)),t.icon)"string"==typeof t.icon&&(t.icon=NSImage.alloc().initWithContentsOfFile(t.icon)),n.icon=t.icon;else if("undefined"!=typeof __command&&__command.pluginBundle()&&__command.pluginBundle().icon())n.icon=__command.pluginBundle().icon();else{var i=NSImage.imageNamed("plugins");i&&(n.icon=i)}return{document:e,options:t,dialog:n}}e.exports.messageBox=function(e,t){var n=i(e,t);return r.runDialog(n.dialog,(function(e,t){return{response:n.options.buttons&&n.options.buttons.length?Number(t)-1e3:Number(t),checkboxChecked:e.suppressionButton().state()==NSOnState}}),n.document)},e.exports.messageBoxSync=function(e,t){var n=i(e,t);return r.runDialogSync(n.dialog,(function(e,t){return n.options.buttons&&n.options.buttons.length?Number(t)-1e3:Number(t)}),n.document)}},function(e,t,n){e.exports={showOpenDialog:n(3).openDialog,showOpenDialogSync:n(3).openDialogSync,showSaveDialog:n(4).saveDialog,showSaveDialogSync:n(4).saveDialogSync,showMessageBox:n(5).messageBox,showMessageBoxSync:n(5).messageBoxSync}},function(e,t){function n(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(o){return void a(t.promise,o)}i(t.promise,r)}else(1===e._state?i:a)(t.promise,e._value)}))):e._deferreds.push(t)}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void s(e);if("function"==typeof n)return void c(n.bind(t),e)}e._state=1,e._value=t,s(e)}catch(o){a(e,o)}}function a(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&r._immediateFn((function(){e._handled||r._unhandledRejectionFn(e._value,e)}));for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function c(e,t){var n=!1;try{e((function(e){n?r._multipleResolvesFn("resolve",t,e):(n=!0,i(t,e))}),(function(e){n?r._multipleResolvesFn("reject",t,e):(n=!0,a(t,e))}))}catch(o){if(n)return void r._multipleResolvesFn("reject",t,o);n=!0,a(t,o)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new u(e,t,r)),r},r.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},r.all=function(e){return new r((function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){i(e,t)}),n)}r[e]=a,0==--o&&t(r)}catch(u){n(u)}}for(var a=0;a<r.length;a++)i(a,r[a])}))},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r((function(t){t(e)}))},r.reject=function(e){return new r((function(t,n){n(e)}))},r.race=function(e){return new r((function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.race accepts an array"));for(var o=0,i=e.length;o<i;o++)r.resolve(e[o]).then(t,n)}))},r._immediateFn=setImmediate,r._unhandledRejectionFn=function(e,t){"undefined"!=typeof process&&process.listenerCount&&(process.listenerCount("unhandledRejection")||process.listenerCount("uncaughtException"))?(process.emit("unhandledRejection",e,t),process.emit("uncaughtException",e,"unhandledRejection")):"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._multipleResolvesFn=function(e,t,n){"undefined"!=typeof process&&process.emit&&process.emit("multipleResolves",e,t,n)},e.exports=r},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(11);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(6),a=n.n(i),s=n(1),u=n.n(s);function c(e){var t,n,r=new o.a.Artboard({name:"Scratch",parent:e}),i=r.frame.changeBasis({from:r,to:r.parent}),a=(t=e.layers.reduce((function(e,t){var n=u()(e,2),r=n[0],o=n[1],i=t.frame.x+t.frame.width,a=t.frame.y;return[i>r?i:r,a<o?a:o]}),[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY]),[(n=u()(t,2))[0]+50,n[1]]),s=u()(a,2),c=s[0],l=s[1];return i.x=c,i.y=l,r.frame=i,r}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=o.a.Shape,d=o.a.Rectangle;function h(e){return e.name.toLowerCase().includes("background")}t.default=function(){var e=o.a.getSelectedDocument(),t=e.selectedLayers,n=t.length;if(0===n)o.a.UI.message("No layers are selected, nothing to do");else{var r=a.a.showOpenDialogSync(e,{title:"Select export folder…",properties:["openDirectory","createDirectory"]});if(1!==r.length)return void o.a.UI.message("Cancelled");var i=r[0];o.a.UI.message("Preparing "+n+" object(s)…");var s=c(e.selectedPage),u=t.layers.map((function(e){var t=e.duplicate();return t.parent=s,t}));s.adjustToFit(),function e(t){var n,r=l(t||[]);try{for(r.s();!(n=r.n()).done;){var o=n.value;switch(o.type){case"SymbolInstance":h(o)?o.sketchObject.isVisible=!1:e([o.detach()]);break;case"Group":e(o.layers),new p({frame:new d(o.frame),name:"Combined shape",parent:o,layers:o.layers.filter((function(e){return"Shape"===e.type})),style:{fills:[{color:"#000"}],borders:[]}}).layers.forEach((function(e){e.sketchObject.setBooleanOperation(0)}));break;case"ShapePath":o.sketchObject.layersByConvertingToOutlines();break;case"Shape":h(o)&&(o.sketchObject.isVisible=!1),o.layers.forEach((function(e){e.sketchObject.setBooleanOperation(0)}))}}}catch(i){r.e(i)}finally{r.f()}}(u);var f=s.layers.filter((function(e){return"Group"===e.type}));o.a.export(f,{formats:"svg",output:i}),o.a.UI.message("Exported "+f.length.toString()+" assets to "+i),s.remove()}}}]);if("default"===e&&"function"==typeof n)n(t);else{if("function"!=typeof n[e])throw new Error('Missing export named "'+e+'". Your command should contain something like `export function " + key +"() {}`.');n[e](t)}}catch(r){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw r;process.emit("uncaughtException",r,"uncaughtException")}}globalThis.onRun=__skpm_run.bind(this,"default");